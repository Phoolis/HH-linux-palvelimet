# Maalisuora

Tehtävänanto: [Linux Palvelimet 2025 alkusyksy Tero Karvinen](https://terokarvinen.com/linux-palvelimet/).

## "Hei maailma!" kolmella kielellä

### Rust

[Rust](https://rust-lang.org/) on suorituskykyinen C-kieltä muistuttava ohjelmointikieli. Rust on käännettävä kieli, eli ohjelmat tulee kompiloida lähdetiedostosta (tekstiä) tietokoneella ajettavaksi binääriksi. Itse kielen saa parhaiten asennettua [rustup-työkalulla](https://rust-lang.github.io/rustup/installation/other.html#apt).

Asenna rustup:  `sudo apt install rustup`.

[Hello World koodi](https://doc.rust-lang.org/rust-by-example/hello.html):

```rust
// hello.rs
fn main() {
    // Statements here are executed when the compiled binary is called.

    // Print text to the console.
    println!("Hello World!");
}
```

Ensin piti ladata rust-paketit rustup:lla ja asettaa `rustc`-kääntäjälle defaultti `rustup default stable`. Sitten käännettiin ohjelmakoodi ajettavaan muotoon `rustc`-komennolla.

<img width="1164" height="603" alt="image" src="https://github.com/user-attachments/assets/2e3e3947-8d32-4978-8472-e1d4f2bab07f" />

<img width="418" height="102" alt="image" src="https://github.com/user-attachments/assets/361adca4-c76a-4977-8114-997c9bf6fe56" />

`hello`-ohjelma on nyt ajettavassa muodossa.

<img width="368" height="66" alt="image" src="https://github.com/user-attachments/assets/0a87c2e6-caad-4e77-a85d-0f42230e3aa4" />

### Go

[Go](https://go.dev/) (usein myös Golang) on myös käännettävä kieli, Googlen kehittämä. 

Asenna go:  `sudo apt install golang-go`.

[Hello world koodi](https://gobyexample.com/hello-world): 

```go
package main

import "fmt"

func main() {
	fmt.Printl("Hei maailma!")
}
```

Go tarvitsee fmt-paketin print komentoa varten: https://pkg.go.dev/fmt

Koodin voi ajaa `go run` -komennolla, tai sen voi kääntää suoraan ajettavaksi binääriksi:

<img width="549" height="125" alt="image" src="https://github.com/user-attachments/assets/85d34b64-1619-410a-829b-371d7a5b9ff9" />

### Lua

[Lua](https://www.lua.org/) on kevyt tulkattava skriptikieli, joten ohjelma on ajettava lua-tulkin läpi. Binäärin luominen vaatii enemmän työtä, eikä ominaisuus tule ainakaan lua-paketissa itsessään mukana.

Asenna lua: `sudo apt install lua5.4`.

<img width="522" height="78" alt="image" src="https://github.com/user-attachments/assets/7f40643a-5d36-4038-960f-053a04e568b1" />

"Hei maailma!" -ohjelman koodi yksinkertaisuudessaan:

```lua
print("Hei maailma!")
```

Ja sen ajaminen `lua hello.lua`:

<img width="397" height="78" alt="image" src="https://github.com/user-attachments/assets/407ee60f-b466-4416-a4cd-77d713815d07" />

## Uusi komento /bin hakemistoon

Ohjeet [Karvinen 2007: Shell Scripting](https://terokarvinen.com/2007/12/04/shell-scripting-4/).

Tein ohjelman `ll`, joka tulostaa kansion sisällön nätisti ja lisäksi hakemiston polun.

<img width="441" height="115" alt="image" src="https://github.com/user-attachments/assets/36747f0a-c205-4352-8883-e522b1c1a7d8" />

Kaikille `execute`-oikeudet:

<img width="667" height="305" alt="image" src="https://github.com/user-attachments/assets/07d02bfb-7ae1-4984-a009-adcfc2ac0749" />

Ja kopioin sen `/usr/local/bin `-kansioon:

<img width="619" height="287" alt="image" src="https://github.com/user-attachments/assets/5f2aa862-19ec-4820-bea5-d2dfe8dd0026" />

Luon väliaikaisen käyttäjän, jotta voin kokeilla toimiiko komento myös toisella käyttäjällä. Löysin [hyvät ohjeet väliaikaisen käyttäjän luomiseksi](https://www.geeksforgeeks.org/linux-unix/creating-a-user-with-an-expiry-date-in-linux/).

Luodaan käyttäjä, joka vanhentuu seuraavana päivänä: `sudo useradd -e 2025-10-04 mayfly`. Laitetaan sille salasana: `sudo passwd mayfly`, jotta voin sitten vaihtaa käyttäjää :`su mayfly`.

<img width="748" height="385" alt="image" src="https://github.com/user-attachments/assets/23d7def0-559e-4093-8db0-4e0e653bbb6e" />

Komento `ll` tulostaa hakemiston tiedostot ja polun myös toisella käyttäjällä.

## Vanha arvioitava laboratorioharjoitus

Etsin arvioitavia laboratorioharjoituksia Teron sivuilta hakusanalla `arvioitava`: <img width="699" height="118" alt="image" src="https://github.com/user-attachments/assets/e5f4c41f-e069-4206-b2fe-5a8a6251a836" />

Valitsin [Kevään 2024 Linux palvelimet lopputehtävän](https://terokarvinen.com/2024/arvioitava-laboratorioharjoitus-2024-linux-palvelimet/). Django-webbipalvelun pystyttäminen kiinnosti erityisesti, sillä olen tässä samalla pystyttämässä Kotlin / react webbipalvelua portfoliota varten. Mielenkiintoista nähdä, kuinka helposti minimisetupin saa pystyyn Djangolla.  Katsotaan miten käy, sillä siitä on aikaa kun olen kirjoittanut mitään koodia Pythonilla viimeksi.

### Django kehitysympäristö pystyyn

Seuraan [Mozillan Django Web Framework - Setting up a Django development environment](https://developer.mozilla.org/en-US/docs/Learn_web_development/Extensions/Server-side/Django/development_environment) -ohjetta.

Python3 version 3.13.5 on jo asennettu koneelle (`python3 -V`). Pitää vielä asentaa Python Package Index eli `pip` pakettien pythonpakettien hallintaan `sudo apt install python3-pip`.

Seuraavaksi asennetaan virtuaalinen ympäristö Django-kehitystä varten: `sudo pip3 install virtualenvwrapper`.

<img width="1155" height="423" alt="image" src="https://github.com/user-attachments/assets/f697f761-0d39-431e-a800-6bf7db2da1ad" />

Jahas, virheilmoitus. Debian ei siis tykkää, että virtualenvwrapper ei ole Debianin hallinnoima? Katsotaan löytyykö tuota `pipx`-pakettia sitten: `apt search pipx`.

<img width="683" height="75" alt="image" src="https://github.com/user-attachments/assets/5cb22cac-b26f-402a-bc26-54f978c95327" />

Löytyi. Koikeillaas asentaa: `sudo apt install pipx`, ja asennuksen jälkeen `pipx --version` tulostaa `1.7.1`.

<img width="1143" height="245" alt="image" src="https://github.com/user-attachments/assets/9e0b1d32-0238-45a0-a276-deaac975b1b6" />

`Virtualenvwrapper`:in asennus onnistui `pipx`:llä. Laitetaan vielä tuon suosituksen mukaan se PATH-ympäristömuuttujaan komennolla `pipx ensurepath`. 

<img width="1109" height="177" alt="image" src="https://github.com/user-attachments/assets/09badd77-fcf6-4d19-8110-412c9b6bbfca" />

Lisäsin vielä bash completionin bash-conffiin: `echo 'eval "$(register-python-argcomplete pipx)' >> ~/.bashrc`.

<img width="1066" height="233" alt="image" src="https://github.com/user-attachments/assets/ed70b5c1-16ef-44dd-81d7-4e2996165720" />

Loggasin ulos ja sisään ja avasin taas terminaalin.

<img width="816" height="278" alt="image" src="https://github.com/user-attachments/assets/a5ff967e-e092-44b2-bd18-aa067c048a9f" />

Ups! Jäi viimeinen lainausmerkki uupumaan tuosta komennosta. Lisäsin puuttuvan `"`-merkin rivin loppuun ja loggasin jälleen ulos ja sisään. Ei enää varoitusta siitä.

Lisäsin seuraavat rivit vielä bashrc-conffiin:

```
export WORKON_HOME=$HOME/.virtualenvs
export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3
export VIRTUALENVWRAPPER_VIRTUALENV_ARGS=' -p /usr/bin/python3 '
export PROJECT_HOME=$HOME/Devel
source /usr/local/bin/virtualenvwrapper.sh
```

Ja ladataan conffi uudelleen shelliin: `source ~/.bashrc`.

<img width="755" height="78" alt="image" src="https://github.com/user-attachments/assets/33d65579-b33b-4073-bc5f-dfdb431698fe" />

No piru. Ei ollut tuolla. Etsitään `which virtualenvwrapper.sh`:

Hermot meni tämän kanssa. En vaan millään saanut `virtualenvwrapper.sh`-tiedostoa löytymään tai toimimaan oikein. Päätin poistaa koko höskän ja asentaa debianin repositoriosta löytyvän `python3-virtualenv` -paketin.

<img width="1180" height="287" alt="image" src="https://github.com/user-attachments/assets/7eff7086-0492-4199-b946-d93d94fb93fa" />



# Lähteet

1. Karvinen, T. Linux Palvelimet 2025 alkusyksy. terokarvinen.com. Luettavissa: https://terokarvinen.com/linux-palvelimet/. Luettu: 4.10.2025.
2. The rustup book. Other installation methods. rust-lang.github.io. Luettavissa: https://rust-lang.github.io/rustup/installation/other.html#apt. Luettu: 4.10.2025.
3. Rust by example. Hello World. doc.rust-lang.org. Luettavissa: https://doc.rust-lang.org. Luettu: 4.10.2025.
4. McGranaghan, M ja Bendersky, E. Go by Example: Hello World. gobyexample.com. Luettavissa: https://gobyexample.com/hello-world. Luettu: 4.10.2025.
5. Karvinen, T. Shell Scripting. terokarvinen.com. Luettavissa: https://terokarvinen.com/2007/12/04/shell-scripting-4/. Luettu: 4.10.2025.
6. behlanmol. Creating a User With an Expiry Date in Linux. geeksforgeeks.org. Luettavissa: https://www.geeksforgeeks.org/linux-unix/creating-a-user-with-an-expiry-date-in-linux/. Luettu: 4.10.2025.
7. Karvinen, T. Final Lab for Linux Palvelimet 2024 Spring. terokarvinen.com. Luettavissa: https://terokarvinen.com/2024/arvioitava-laboratorioharjoitus-2024-linux-palvelimet/. Luettu: 4.10.2025.
8. Mozilla Foundation. Setting up a Django development environment. developer.mozilla.org. Luettavissa: https://developer.mozilla.org/en-US/docs/Learn_web_development/Extensions/Server-side/Django/development_environment. Luettu: 4.10.2025.

----
Licensed under Creative Commons [CC BY 4.0](https://creativecommons.org/licenses/by/4.0/)

CC BY: credit must be given to the creator, Paul Carlson.
